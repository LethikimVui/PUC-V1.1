@model List<SharedObjects.ValueObjects.VRequest>;
@using Microsoft.Extensions.Configuration;
@inject IConfiguration Configuration

<div class="container-fluid">
    <div class="row">
        <div class="col-md-12">
            <!-- BEGIN EXAMPLE TABLE PORTLET-->
            <div class="portlet light" style="height:1700px">
                <div class="portlet-title">
                    <div class="caption col-md-12">
                        <span class="caption-subject font-green-sharp bold uppercase">
                            Request - Search
                        </span>
                    </div>
                    <table class="table table-bordered table-hover table-striped">
                        <thead>
                            <tr class="text-center bold">
                                <td>No.</td>
                                <td>Request Number</td>
                                <td>Attachment</td>
                                <td>Created By</td>
                                <td>Creation Date</td>
                                <td>Approved By</td>
                                <td>Update Date</td>
                                <td>Status</td>
                                <td style="width:100px">Modification</td>
                            </tr>
                        </thead>
                        <tbody id="table-data">
                            @foreach (var item in Model)
                            {
                                <tr class="text-center">
                                    <td id="">@item.rc</td>
                                    <td id="">@item.ReqNumber</td>
                                    <td id="" class="zoom">
                                        @if (item.FileName != null)
                                        {
                                            @foreach (var item2 in item.FileName.Split(';'))
                                            {
                                                @*<a href="/media/images/2_20211015132024955.png" alt="image" target="_blank">*@
                                                @*<a href="file://vnhcmm0teapp02//PUC/2_20211015132024955.png" alt="image" target="_blank">
                                                        @item2
                                                        <img style="width: auto; height: 60px" src="file://vnhcmm0teapp02/PUC/2_20211015132024955.png" target="_blank">
                                                    </a>*@

                                                <a class="wrapper" id="btn" href="@Url.Action("DownloadFile", "Request", new { fileName = @item2 })">@item2</a>
                                                <br />
                                            }
                                        }
                                    </td>
                                    <td id="">@item.CreatedName</td>
                                    <td id="">@item.CreationDate</td>
                                    <td id="">@item.UpdatedBy</td>
                                    <td id="">@item.UpdateDate</td>
                                    <td id="" style="background-color:@item.StatusColor">@item.Status</td>
                                    <td class="text-center">
                                        @if (item.Status == "Pending Approval")
                                        {
                                            <a id="btn-show" class="btn default btn-xs red" data-detailid="@item.ReqNumber" data-reqid="@item.ReqId" data-createdby="@item.CreatedBy" data-createdemail="@item.CreatedEmail" title="Show Request" data-toggle="modal" data-target="#myModal"> <span class="glyphicon glyphicon-chevron-up"></span></a>

                                        }

                                    </td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- The Modal -->
<div class="modal" id="myModal">
    <div class="modal-dialog">
        <div class="modal-content">

            <!-- Modal Header -->
            <div class="modal-header">
                <h4 class="modal-title">Detail Part Request Detail</h4>
                <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>

            <!-- Modal body -->
            <div class="modal-body pre-scrollable">
                <table id="modal-detail" class="table table-striped table-hover table-scrollable table-responsive">
                </table>
            </div>
            <div class="form-group">
                <label>Remark</label>
                <input type="text" id="txt-description" />
            </div>
            <!-- Modal footer -->
            <div class="modal-footer">
                <button type="button" class="btn btn-danger btn-modal" id="btn-reject">Reject</button>
                <button type="button" class="btn blue btn-modal" id="btn-approve">Approve</button>

            </div>
        </div>
    </div>
</div>

@section Script{
    <script src="~/js/request.js"></script>
}